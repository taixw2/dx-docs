(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{359:function(t,s,a){"use strict";a.r(s);var e=a(24),r=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"介绍"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#介绍"}},[t._v("#")]),t._v(" 介绍")]),t._v(" "),a("h3",{attrs:{id:"为什么会有-dxjs"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#为什么会有-dxjs"}},[t._v("#")]),t._v(" 为什么会有 Dxjs")]),t._v(" "),a("p",[t._v("Dxjs 为了解决项目中实际遇到的问题，最初某个项目采用的 redux + redux-saga 做的状态管理，但是每次都要定义 Action Type，并且还要保证 Action Type 和原来的定义的不一样，这样会导致大量的工作，以及难以排查的问题，后来我想引入 Dva，但是很难与现有的 redux-saga 同时使用，之后就花了两三天时间写了一个类 Dva，再往后逐步增强，就产生了 "),a("a",{attrs:{href:"https://github.com/taixw2/dxjs/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Dxjs"),a("OutboundLink")],1)]),t._v(" "),a("h3",{attrs:{id:"dxjs-能做什么"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dxjs-能做什么"}},[t._v("#")]),t._v(" Dxjs 能做什么")]),t._v(" "),a("p",[t._v("它对数据流的每一个阶段都加入了钩子，加入了哨兵、伪装者、守卫，分别对应在 effect 执行前，执行时，执行后，以及 reducer 的增强器，能够很方便的集成 immer 等库。")]),t._v(" "),a("p",[t._v("它采用类来管理 Effect、State，通过装饰器来来辨别是 reducer 或 effect，以及 constructor 能够做一些初始化的事情")]),t._v(" "),a("h2",{attrs:{id:"安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[t._v("#")]),t._v(" 安装")]),t._v(" "),a("h3",{attrs:{id:"安装-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装-2"}},[t._v("#")]),t._v(" 安装")]),t._v(" "),a("ol",[a("li",[t._v("dxjs 内部依赖 symbol 以及 reflect.metadata, 所以对于低级浏览器，需要先引入对于的 polyfill")]),t._v(" "),a("li",[t._v("引入 redux 的三件套："),a("code",[t._v("react")]),t._v("、"),a("code",[t._v("react-dom")]),t._v("、"),a("code",[t._v("react-redux")])]),t._v(" "),a("li",[t._v("引入 dxjs: "),a("code",[t._v("@dxjs/core")]),t._v("、"),a("code",[t._v("@dxjs/common")])])]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" reflect-metadata es6-symbol "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# polyfill")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" react react-dom react-redux \n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" @dxjs/core @dxjs/common\n")])])]),a("h3",{attrs:{id:"在-taro-中安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#在-taro-中安装"}},[t._v("#")]),t._v(" 在 taro 中安装")]),t._v(" "),a("ol",[a("li",[t._v("在 taro 中同样需要引入 polyfill")]),t._v(" "),a("li",[t._v("引入 taro 的 redux polyfill")]),t._v(" "),a("li",[t._v("引入 dxjs")]),t._v(" "),a("li",[t._v("修改 config/index.js")])]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" reflect-metadata es6-symbol\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" @tarojs/redux @tarojs/redux-h5\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" @dxjs/core @dxjs/common\n")])])]),a("blockquote",[a("p",[t._v("config/index.js")])]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("alias: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"react"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" require.resolve"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@tarojs/taro"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(",\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"react-dom"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" require.resolve"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@tarojs/taro"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(",\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"react-redux"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" require.resolve"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@tarojs/redux"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(",\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])])}),[],!1,null,null,null);s.default=r.exports}}]);